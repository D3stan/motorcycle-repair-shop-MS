.include {setup.qmd}

.include {header.qmd}

.tableofcontents

# Analisi dei requisiti

Si vuole sviluppare un software che permetta la gestione di un'officina meccanica per motocicli e faciliti 
le operazioni organizzative per ridurre notevolmente il carico di lavoro e il rischio di perdita e/o dimenticanza 
di informazioni. I dati manipolati comprendono diversi domini (interventi, ricambi, fatturazione) e sono specifici
in base all'utilizzatore.  
Infatti il gestionale potrà essere utilizzato anche dai clienti per agire in autonomia e diminuire ulteriormente
l'intervento umano da parte dell'officina.

## Intervista

Si vuole tenere traccia dei clienti dell'officina memorizzandone nome, cognome, codice fiscale, numero di telefono
e indirizzo email. I clienti possono registrarsi autonomamente sul sistema per evitare di dover reinserire i propri dati
ad ogni prenotazione. Al momento della registrazione ogni cliente può aggiungere le proprie motociclette ad un
garage virtuale personale.  
Di ogni motocicletta si memorizza il proprietario, la targa, il numero di telaio, l'anno di immatricolazione ed
eventuali note particolari. Ogni motocicletta appartiene ad un modello specifico caratterizzato da marca, nome commerciale,
cilindrata, segmento di appartenenza e potenza.
I clienti possono prenotare appuntamenti presso l'officina specificando una data, una descrizione del problema o del servizio
richiesto. Gli appuntamenti possono riguardare interventi di manutenzione ordinaria o straordinaria oppure sessioni di prova
al banco dinamometrico per la valutazione e l'ottimizzazione delle prestazioni del motore.

Ogni intervento di manutenzione viene caratterizzato da una data di inizio, una data di fine, i chilometri della
motocicletta al momento dell'intervento, il tipo di intervento, la causa che ha
reso necessario l'intervento, le ore totali impiegate e eventuali note tecniche. Ogni intervento ha uno stato che ne descrive
l'avanzamento.
Gli interventi vengono svolti da uno o più meccanici dell'officina. Del personale si memorizzano nome, cognome, codice fiscale,
numero di telefono e email. Il personale è classificato per tipologia (meccanico, amministratore).  
Le sessioni al banco prova sono caratterizzate da una data di inizio, la durata in ore della sessione e note relative ai risultati
ottenuti. Anche le sessioni possono essere svolte da uno o più meccanici e riguardano una specifica motocicletta.

Per gli interventi di manutenzione è necessario utilizzare ricambi che vengono prelevati dal magazzino dell'officina.
Ogni ricambio è caratterizzato da marca, nome, descrizione, codice identificativo, prezzo di acquisto dal fornitore.
I ricambi sono forniti da diversi fornitori, ognuno identificato da un codice, nome, numero di telefono ed email.  
Ogni ricambio è compatibile con uno o più modelli di motocicletta e viene conservato in magazzino fino al momento dell'utilizzo.
Del magazzino si tiene traccia dei ricambi presenti e delle relative quantità.
Durante un intervento si registra l'utilizzo di ogni ricambio specificando la quantità utilizzata e il prezzo applicato al cliente
per quel particolare ricambio in quell'intervento.

Al termine di ogni intervento o sessione al banco prova viene emessa una fattura intestata al cliente. Ogni fattura riporta un
codice identificativo, l'importo totale, la data di emissione ed eventuali note. La fattura può riferirsi ad un intervento di manutenzione,
ad una sessione al banco prova, o ad entrambi se eseguiti contestualmente.  
I clienti possono consultare in tempo reale lo stato di avanzamento dei lavori sulle proprie motociclette e visualizzare lo storico
completo degli interventi effettuati con i relativi dettagli tecnici e costi sostenuti.



Il titolare di un'officina desidera snellire la gestione quotidiana della propria attività. Racconta che, al momento,
tutte le informazioni su clientela, motociclette, appuntamenti e ricambi vengono annotate su fogli di calcolo e agende cartacee,
con il rischio costante di errori, sovrapposizioni o semplici dimenticanze.
Egli spiega che i clienti, prima di tutto, devono potersi registrare online inserendo i propri dati anagrafici e di contatto.
Una volta registrato, il cliente ha la possibilità di aggiungere le sue moto a un “garage virtuale”, specificando targa, marca,
modello e qualche nota personale. In questo modo lo staff può visualizzare lo storico della moto per aiutare con diagnosi di problemi futuri.  

Il passo successivo riguarda la prenotazione degli appuntamenti. Il titolare sottolinea l’esigenza di un calendario che mostri
le fasce orarie libere per interventi di manutenzione ordinaria o per prove al banco.
Infatti il cliente deve poter disdire in autonomia. Al momento della richiesta, il sistema deve salvare l'appuntamento in
uno stato di “attesa di conferma” che l’officina potrà poi convertire in “confermato” oppure rifiutare, tenendo conto della
disponibilità dei meccanici e della complessità del lavoro.  
Durante il lavoro sulla moto, il proprietario vuole registrare uno o più meccanici assegnati, annotare ogni fase dell’intervento
e i ricambi utilizzati. Serve aggiornare lo stato in tempo reale per permettere ai clienti di rimanere aggiornati senza disturbare l'officina.
Terminato l’intervento, il sistema deve permettere di generare una fattura intestata al cliente, includendo manodopera ed eventuali ricambi utilizzati.

Un’altra criticità evidenziata riguarda il magazzino: ricambi di varia natura, ciascuno con disponibilità, codice fornitore e categoria.
Occorre un modulo di inventario con soglie di riordino e storico degli acquisti presso fornitori diversi. Il titolare desidera inoltre
mettere in relazione ogni ricambio con i modelli di moto compatibili, così da evitare errori di montaggio.  
Sul fronte amministrativo, l’officina impiega alcuni meccanici e un addetto alla reception che deve poter gestire assunzioni, turni
e assegnazioni ai lavori. Per questo si richiede una sezione dedicata allo staff, con ruoli differenziati (meccanico, amministratore)
e permessi di accesso mirati: ad esempio, solo l’amministratore emette fatture, mentre i meccanici aggiornano lo stato dei lavori a loro assegnati.  
Infine, il titolare vorrebbe un cruscotto riepilogativo che mostri a colpo d’occhio appuntamenti imminenti, lavori in corso,
ricavi mensili e ricambi sotto scorta minima. 

## Rilevamento delle ambiguità e correzioni proposte

[Inserire qui le ambiguità rilevate nel testo dell'intervista e le correzioni proposte.]

.tablesort {1}
    .csv {tables/concepts.csv} caption:{concetti.}


## Definizione delle specifiche in linguaggio naturale ed estrazione dei concetti principali

[Inserire qui il riassunto dell'intervista con le correzioni]

[Elenco con le operazioni definite]
- op1
- op2


# Progettazione Concettuale

[Inserire qui descrizione della prima iterazione di schema ER]  

## Schema scheletro

![ER](imgs/scheletro.png "Inserire qui lo schema scheletro del database")

## Raffinamenti proposti

[Inserire qui i raffinamenti proposti allo schema scheletro.]

## Schema concettuale finale

![ER](imgs/finale.png "Inserire qui lo schema concettuale finale")



# Progettazione logica

## Stima del volume dei dati

.tablesort {1}
    .csv {tables/volumes.csv} caption:{volumi di dati.}

## Descrizione delle operazioni principali e stima della loro frequenza

.tablesort {1}
    .csv {tables/operations.csv} caption:{frequenza operazioni.}

[Inserire qui la descrizione delle operazioni principali e la stima della loro frequenza.]

## Schemi di navigazione e tabelle degli accessi

#####! OP 1 - Operazione 1
[Inserire qui descrizione operazione 1]
| Concetto | Tipo | Accessi | Operazione 
|----------|------|---------|------------
| Concetto1 | E | 1 | L
| Concetto2 | R | 2 | S

.center
    [Totale costo operazione 1]

#####! OP 2 - Operazione 2
[Inserire qui descrizione operazione 2]
| Concetto | Tipo | Accessi | Operazione 
|----------|------|---------|------------
| Concetto1 | E | 1 | L
| Concetto2 | R | 2 | S

.center
    [Totale costo operazione 2]

![ER](imgs/navigazione2.png "Inserire qui lo schema di navigazione dell'operazione 2")


## Raffinamento dello schema

#### Eliminazione degli attributi composti
.loremipsum

#### Eliminazione di identificatori esterni
.loremipsum

#### Eliminazione gerarchie
.loremipsum

#### Scelta delle chiavi 
.loremipsum

## Analisi delle ridondanze

[Inserire qui l'elenco delle ridondanze presenti.]

#####! OP 1 - Operazione 1
[Inserire qui descrizione della ridondanza nell'operazione 1 (contando le ridondanze)]
| Concetto | Tipo | Accessi | Operazione 
|----------|------|---------|------------
| Concetto1 | E | 1 | L
| Concetto2 | R | 2 | S

.center
    [Totale costo operazione 1]

[Inserire qui descrizione della ridondanza nell'operazione 1 (senza le ridondanze)]
| Concetto | Tipo | Accessi | Operazione 
|----------|------|---------|------------
| Concetto1 | E | 1 | L
| Concetto2 | R | 2 | S

.center
    [Totale costo operazione 1]

#####! OP 2 - Operazione 2
[Inserire qui descrizione operazione 2 (contando le ridondanze)]
| Concetto | Tipo | Accessi | Operazione 
|----------|------|---------|------------
| Concetto1 | E | 1 | L
| Concetto2 | R | 2 | S

.center
    [Totale costo operazione 2]

[Inserire qui descrizione operazione 2 (senza le ridondanze)]
| Concetto | Tipo | Accessi | Operazione 
|----------|------|---------|------------
| Concetto1 | E | 1 | L
| Concetto2 | R | 2 | S

.center
    [Totale costo operazione 2]

## Traduzione di entità e associazioni in relazioni

[Inserire qui la traduzione di entità e associazioni in relazioni.]

## Schema relazionale finale

![RL](imgs/relazionale.png "Inserire qui lo schema relazionale")

## Traduzione delle operazioni in query SQL

##### OP 1 - Operazione 1
[Inserire qui commenti aggiuntivi per l'operazione 1 se necessari.]

.code {sql}
    SELECT code
    FROM goes
    WHERE here  


##### OP 2 - Operazione 2
[Inserire qui commenti aggiuntivi per l'operazione 2 se necessari.]

.code {sql}
    SELECT code
    FROM goes
    WHERE here


# Progettazione dell'applicazione

## Descrizione dell'architettura dell'applicazione realizzata

[Inserire qui la descrizione dell'architettura dell'applicazione realizzata]

## Guida utente

[Inserire qui una breve descrizione o demo dell'utilizzo dell'applicazione.]

![screenshot](imgs/screenshot.png "Inserire qui screenshot dell'applicazione")